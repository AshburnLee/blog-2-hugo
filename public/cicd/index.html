<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>CICD | Junhui&#39;s Journal 2</title>
<meta name="keywords" content="CICD">
<meta name="description" content="回忆 Jenkin 是如何实现当 PR push 时自动触发执行的？需要找一个 jenkins 插件帮助我实现 PR 通过 关键字 触发 CI.
使用什么插件？尝试了 “GitHub Branch Source” 中的 “Multibranch Pipeline projects”，需要在目标 repo 的根目录中创建并编辑 JenkinsFile 文件并且在 github repo 中配置一个webhook，每当有新 PR 到这个 repo，扫描 repo 并触发新 branch 执行 JenkinsFile。每一个 branch 触发一个 job，而这个 job 是不能通过修改 job config 来参数化的，需要通过 property step 在 JenkinsFile 中将这个branch 的 job 参数化。如此就可以执行任何内容了。
Pytest
Pytest 测试框架
pytest 提供了许多装饰器，比如 @pytest.mark.parametrize 让你为一个测试用例提供多个输入（输出参数，不同参数之间会进行笛卡尔积组合）。减少了重复代码。
更多用法 看看 pytest 命令参数。结果有4中状态，xfailed 等。实例：
import pytest

@pytest.mark.parametrize(&#34;a&#34;, [1, 2])
@pytest.mark.parametrize(&#34;b&#34;, [&#39;x&#39;, &#39;y&#39;])
def test_example(a, b):
    print(f&#34;Testing with a={a} and b={b}&#34;)

# 输出将会是：
# Testing with a=1 and b=x
# Testing with a=1 and b=y
# Testing with a=2 and b=x
# Testing with a=2 and b=y
跳过某些 test cases

使用 pytest.mark.skip 标记 case。
使用 --deselect-from-file 接受一个文件，这个文件中的所有 cases 都会被跳过。
使用 --ignore=test_xxx.py

与 pytest 一同使用的插件
pytest-select">
<meta name="author" content="">
<link rel="canonical" href="https://ashburnLee.github.io/blog-2-hugo/cicd/">
<link crossorigin="anonymous" href="/blog-2-hugo/assets/css/stylesheet.bdaf5941cb3c05e36e857d9e2953ba0c4485ba7bc2da15db169d66a77cbc7a87.css" integrity="sha256-va9ZQcs8BeNuhX2eKVO6DESFunvC2hXbFp1mp3y8eoc=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://ashburnLee.github.io/blog-2-hugo/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://ashburnLee.github.io/blog-2-hugo/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://ashburnLee.github.io/blog-2-hugo/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://ashburnLee.github.io/blog-2-hugo/apple-touch-icon.png">
<link rel="mask-icon" href="https://ashburnLee.github.io/blog-2-hugo/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://ashburnLee.github.io/blog-2-hugo/cicd/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  <script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" id="MathJax-script" async></script>


<meta property="og:url" content="https://ashburnLee.github.io/blog-2-hugo/cicd/">
  <meta property="og:site_name" content="Junhui&#39;s Journal 2">
  <meta property="og:title" content="CICD">
  <meta property="og:description" content="回忆 Jenkin 是如何实现当 PR push 时自动触发执行的？需要找一个 jenkins 插件帮助我实现 PR 通过 关键字 触发 CI.
使用什么插件？尝试了 “GitHub Branch Source” 中的 “Multibranch Pipeline projects”，需要在目标 repo 的根目录中创建并编辑 JenkinsFile 文件并且在 github repo 中配置一个webhook，每当有新 PR 到这个 repo，扫描 repo 并触发新 branch 执行 JenkinsFile。每一个 branch 触发一个 job，而这个 job 是不能通过修改 job config 来参数化的，需要通过 property step 在 JenkinsFile 中将这个branch 的 job 参数化。如此就可以执行任何内容了。
Pytest Pytest 测试框架 pytest 提供了许多装饰器，比如 @pytest.mark.parametrize 让你为一个测试用例提供多个输入（输出参数，不同参数之间会进行笛卡尔积组合）。减少了重复代码。
更多用法 看看 pytest 命令参数。结果有4中状态，xfailed 等。实例：
import pytest @pytest.mark.parametrize(&#34;a&#34;, [1, 2]) @pytest.mark.parametrize(&#34;b&#34;, [&#39;x&#39;, &#39;y&#39;]) def test_example(a, b): print(f&#34;Testing with a={a} and b={b}&#34;) # 输出将会是： # Testing with a=1 and b=x # Testing with a=1 and b=y # Testing with a=2 and b=x # Testing with a=2 and b=y 跳过某些 test cases 使用 pytest.mark.skip 标记 case。 使用 --deselect-from-file 接受一个文件，这个文件中的所有 cases 都会被跳过。 使用 --ignore=test_xxx.py 与 pytest 一同使用的插件 pytest-select">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2025-08-31T12:57:44+08:00">
    <meta property="article:modified_time" content="2025-08-31T12:57:44+08:00">
    <meta property="article:tag" content="CICD">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CICD">
<meta name="twitter:description" content="回忆 Jenkin 是如何实现当 PR push 时自动触发执行的？需要找一个 jenkins 插件帮助我实现 PR 通过 关键字 触发 CI.
使用什么插件？尝试了 “GitHub Branch Source” 中的 “Multibranch Pipeline projects”，需要在目标 repo 的根目录中创建并编辑 JenkinsFile 文件并且在 github repo 中配置一个webhook，每当有新 PR 到这个 repo，扫描 repo 并触发新 branch 执行 JenkinsFile。每一个 branch 触发一个 job，而这个 job 是不能通过修改 job config 来参数化的，需要通过 property step 在 JenkinsFile 中将这个branch 的 job 参数化。如此就可以执行任何内容了。
Pytest
Pytest 测试框架
pytest 提供了许多装饰器，比如 @pytest.mark.parametrize 让你为一个测试用例提供多个输入（输出参数，不同参数之间会进行笛卡尔积组合）。减少了重复代码。
更多用法 看看 pytest 命令参数。结果有4中状态，xfailed 等。实例：
import pytest

@pytest.mark.parametrize(&#34;a&#34;, [1, 2])
@pytest.mark.parametrize(&#34;b&#34;, [&#39;x&#39;, &#39;y&#39;])
def test_example(a, b):
    print(f&#34;Testing with a={a} and b={b}&#34;)

# 输出将会是：
# Testing with a=1 and b=x
# Testing with a=1 and b=y
# Testing with a=2 and b=x
# Testing with a=2 and b=y
跳过某些 test cases

使用 pytest.mark.skip 标记 case。
使用 --deselect-from-file 接受一个文件，这个文件中的所有 cases 都会被跳过。
使用 --ignore=test_xxx.py

与 pytest 一同使用的插件
pytest-select">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "CICD",
      "item": "https://ashburnLee.github.io/blog-2-hugo/cicd/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CICD",
  "name": "CICD",
  "description": "回忆 Jenkin 是如何实现当 PR push 时自动触发执行的？需要找一个 jenkins 插件帮助我实现 PR 通过 关键字 触发 CI.\n使用什么插件？尝试了 “GitHub Branch Source” 中的 “Multibranch Pipeline projects”，需要在目标 repo 的根目录中创建并编辑 JenkinsFile 文件并且在 github repo 中配置一个webhook，每当有新 PR 到这个 repo，扫描 repo 并触发新 branch 执行 JenkinsFile。每一个 branch 触发一个 job，而这个 job 是不能通过修改 job config 来参数化的，需要通过 property step 在 JenkinsFile 中将这个branch 的 job 参数化。如此就可以执行任何内容了。\nPytest Pytest 测试框架 pytest 提供了许多装饰器，比如 @pytest.mark.parametrize 让你为一个测试用例提供多个输入（输出参数，不同参数之间会进行笛卡尔积组合）。减少了重复代码。\n更多用法 看看 pytest 命令参数。结果有4中状态，xfailed 等。实例：\nimport pytest @pytest.mark.parametrize(\u0026#34;a\u0026#34;, [1, 2]) @pytest.mark.parametrize(\u0026#34;b\u0026#34;, [\u0026#39;x\u0026#39;, \u0026#39;y\u0026#39;]) def test_example(a, b): print(f\u0026#34;Testing with a={a} and b={b}\u0026#34;) # 输出将会是： # Testing with a=1 and b=x # Testing with a=1 and b=y # Testing with a=2 and b=x # Testing with a=2 and b=y 跳过某些 test cases 使用 pytest.mark.skip 标记 case。 使用 --deselect-from-file 接受一个文件，这个文件中的所有 cases 都会被跳过。 使用 --ignore=test_xxx.py 与 pytest 一同使用的插件 pytest-select\n",
  "keywords": [
    "CICD"
  ],
  "articleBody": "回忆 Jenkin 是如何实现当 PR push 时自动触发执行的？需要找一个 jenkins 插件帮助我实现 PR 通过 关键字 触发 CI.\n使用什么插件？尝试了 “GitHub Branch Source” 中的 “Multibranch Pipeline projects”，需要在目标 repo 的根目录中创建并编辑 JenkinsFile 文件并且在 github repo 中配置一个webhook，每当有新 PR 到这个 repo，扫描 repo 并触发新 branch 执行 JenkinsFile。每一个 branch 触发一个 job，而这个 job 是不能通过修改 job config 来参数化的，需要通过 property step 在 JenkinsFile 中将这个branch 的 job 参数化。如此就可以执行任何内容了。\nPytest Pytest 测试框架 pytest 提供了许多装饰器，比如 @pytest.mark.parametrize 让你为一个测试用例提供多个输入（输出参数，不同参数之间会进行笛卡尔积组合）。减少了重复代码。\n更多用法 看看 pytest 命令参数。结果有4中状态，xfailed 等。实例：\nimport pytest @pytest.mark.parametrize(\"a\", [1, 2]) @pytest.mark.parametrize(\"b\", ['x', 'y']) def test_example(a, b): print(f\"Testing with a={a} and b={b}\") # 输出将会是： # Testing with a=1 and b=x # Testing with a=1 and b=y # Testing with a=2 and b=x # Testing with a=2 and b=y 跳过某些 test cases 使用 pytest.mark.skip 标记 case。 使用 --deselect-from-file 接受一个文件，这个文件中的所有 cases 都会被跳过。 使用 --ignore=test_xxx.py 与 pytest 一同使用的插件 pytest-select\npytest-xdict\npytest-timeout\nTexture：给 pytest 命令一个用户自定义选项 如何给 pytest 命令一个用户自定义的选项比如 --device cpu？答：使用 pytest_addoption 钩子在 conftest.py 文件中添加这个选项。需要一个名为 conftest.py 文件，并且包含一下内容：\nimport pytest def pytest_addoption(parser): parser.addoption(\"--device\", action=\"store\", default='cuda') @pytest.fixture def device(request): return request.config.getoption(\"--device\") 搜索其他 texture 及其用法。\nCache 机制 pytest 提供了一个内置的缓存插件，称为 pytest-cache，它允许你存储和重用测试之间的数据。这个插件可以帮助提高测试的效率，特别是当测试涉及到耗时的设置步骤时。pytest-cache 插件通过 .pytest_cache 目录来存储缓存数据。这个目录通常位于项目的根目录中。\nPre-commit [用于管理hook的框架] 是什么？ pre-commit 是一个用于管理和运行多语言代码格式化、linting、类型检查等任务的工具。它允许你在提交代码之前自动运行这些检查，以确保代码符合项目的质量标准。 pre-commit 可以在你提交代码到版本控制系统之前自动运行一系列的检查。这些检查可以包括代码格式化、语法检查、查找敏感数据等 pre-commit 是一个用于管理 Git 钩子（hooks）的框架，通过配置文件.pre-commit-config.yaml来指定 hook 和传给 hook 的参数，以及在什么阶段运行 hook。并可以在本地自动修正。 当你安装了 pre-commit 工具，他会根据.pre-commit-config.yaml中的定义来管理 Git 钩子。\n什么是 Hook？在 pre-commit 上下文中，钩子（hook）指的是在特定事件（如 Git 提交）发生时自动运行的脚本或工具。\n获益 自动化：你可以在提交代码之前自动运行各种检查，无需手动触发。 配置简单：使用 .pre-commit-config.yaml 文件可以轻松配置要运行的任务和它们的顺序。 多语言支持：pre-commit 支持各种编程语言的工具，如 Python 的 flake8、mypy，JavaScript 的 eslint，Go 的 golint 等。 可移植性：由于配置是项目的一部分，因此可以在任何支持 pre-commit 的环境中轻松设置和运行。 易于集成：可以与 Git 钩子轻松集成，以在提交时自动运行。 灵活性：可以定义要在每个文件、文件匹配模式或所有文件上运行的任务。 包括检查破坏的符号链接、尾随空格、文件末尾的换行符、YAML 文件、TOML 文件、抽象语法树、大文件、合并冲突、脚本的 shebang 行、私钥和调试语句\n用法 项目根目录创建文件：.pre-commit-config.yaml。\n坑 yml 文件不能使用 tab，只能还是用 space。\n",
  "wordCount" : "224",
  "inLanguage": "en",
  "datePublished": "2025-08-31T12:57:44+08:00",
  "dateModified": "2025-08-31T12:57:44+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://ashburnLee.github.io/blog-2-hugo/cicd/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Junhui's Journal 2",
    "logo": {
      "@type": "ImageObject",
      "url": "https://ashburnLee.github.io/blog-2-hugo/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://ashburnLee.github.io/blog-2-hugo/" accesskey="h" title="Junhui&#39;s Journal 2 (Alt + H)">Junhui&#39;s Journal 2</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://ashburnLee.github.io/blog-2-hugo/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://ashburnLee.github.io/blog-2-hugo/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://ashburnLee.github.io/blog-2-hugo/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      CICD
    </h1>
    <div class="post-meta"><span title='2025-08-31 12:57:44 +0800 CST'>August 31, 2025</span>

</div>
  </header> 
  <div class="post-content"><p>回忆 Jenkin 是如何实现当 PR push 时自动触发执行的？需要找一个 jenkins 插件帮助我实现 PR 通过 关键字 触发 CI.</p>
<p>使用什么插件？尝试了 “GitHub Branch Source” 中的 “Multibranch Pipeline projects”，需要在目标 repo 的根目录中创建并编辑 JenkinsFile 文件并且在 github repo 中配置一个webhook，每当有新 PR 到这个 repo，扫描 repo 并触发新 branch 执行 JenkinsFile。每一个 branch 触发一个 job，而这个 job 是不能通过修改 job config 来参数化的，需要通过 property step 在 JenkinsFile 中将这个branch 的 job 参数化。如此就可以执行任何内容了。</p>
<h1 id="pytest">Pytest<a hidden class="anchor" aria-hidden="true" href="#pytest">#</a></h1>
<h2 id="pytest-测试框架">Pytest 测试框架<a hidden class="anchor" aria-hidden="true" href="#pytest-测试框架">#</a></h2>
<p>pytest 提供了许多装饰器，比如 <code>@pytest.mark.parametrize</code> 让你为一个测试用例提供多个输入（输出参数，不同参数之间会进行<strong>笛卡尔积组合</strong>）。减少了重复代码。</p>
<p>更多用法 看看 pytest 命令参数。结果有4中状态，xfailed 等。实例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> pytest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@pytest.mark.parametrize</span>(<span style="color:#e6db74">&#34;a&#34;</span>, [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@pytest.mark.parametrize</span>(<span style="color:#e6db74">&#34;b&#34;</span>, [<span style="color:#e6db74">&#39;x&#39;</span>, <span style="color:#e6db74">&#39;y&#39;</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">test_example</span>(a, b):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Testing with a=</span><span style="color:#e6db74">{</span>a<span style="color:#e6db74">}</span><span style="color:#e6db74"> and b=</span><span style="color:#e6db74">{</span>b<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 输出将会是：</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Testing with a=1 and b=x</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Testing with a=1 and b=y</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Testing with a=2 and b=x</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Testing with a=2 and b=y</span>
</span></span></code></pre></div><h2 id="跳过某些-test-cases">跳过某些 test cases<a hidden class="anchor" aria-hidden="true" href="#跳过某些-test-cases">#</a></h2>
<ul>
<li>使用 <code>pytest.mark.skip</code> 标记 case。</li>
<li>使用 <code>--deselect-from-file</code> 接受一个文件，这个文件中的所有 cases 都会被跳过。</li>
<li>使用 <code>--ignore=test_xxx.py</code></li>
</ul>
<h2 id="与-pytest-一同使用的插件">与 pytest 一同使用的插件<a hidden class="anchor" aria-hidden="true" href="#与-pytest-一同使用的插件">#</a></h2>
<p>pytest-select</p>
<p>pytest-xdict</p>
<p>pytest-timeout</p>
<h2 id="texture给-pytest-命令一个用户自定义选项">Texture：给 pytest 命令一个用户自定义选项<a hidden class="anchor" aria-hidden="true" href="#texture给-pytest-命令一个用户自定义选项">#</a></h2>
<p>如何给 pytest 命令一个用户自定义的选项比如 <code>--device cpu</code>？答：使用 <code>pytest_addoption</code> 钩子在 <code>conftest.py</code> 文件中添加这个选项。需要一个名为 <code>conftest.py</code> 文件，并且包含一下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> pytest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pytest_addoption</span>(parser):
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>addoption(<span style="color:#e6db74">&#34;--device&#34;</span>, action<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;store&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cuda&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@pytest.fixture</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">device</span>(request):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> request<span style="color:#f92672">.</span>config<span style="color:#f92672">.</span>getoption(<span style="color:#e6db74">&#34;--device&#34;</span>)
</span></span></code></pre></div><p>搜索其他 texture 及其用法。</p>
<h2 id="cache-机制">Cache 机制<a hidden class="anchor" aria-hidden="true" href="#cache-机制">#</a></h2>
<p>pytest 提供了一个内置的缓存插件，称为 <code>pytest-cache</code>，它允许你存储和重用测试之间的数据。这个插件可以帮助提高测试的效率，特别是当测试涉及到耗时的设置步骤时。<code>pytest-cache</code> 插件通过 <code>.pytest_cache</code> 目录来存储缓存数据。这个目录通常位于项目的根目录中。</p>
<h1 id="pre-commit-用于管理hook的框架">Pre-commit [用于管理hook的框架]<a hidden class="anchor" aria-hidden="true" href="#pre-commit-用于管理hook的框架">#</a></h1>
<h2 id="是什么">是什么？<a hidden class="anchor" aria-hidden="true" href="#是什么">#</a></h2>
<ul>
<li>pre-commit 是一个用于管理和运行多语言代码格式化、linting、类型检查等任务的工具。它允许你在提交代码之前自动运行这些检查，以确保代码符合项目的质量标准。</li>
<li>pre-commit 可以在你提交代码到版本控制系统之前自动运行一系列的检查。这些检查可以包括代码格式化、语法检查、查找敏感数据等</li>
<li>pre-commit 是一个用于管理 Git 钩子（hooks）的框架，通过配置文件<code>.pre-commit-config.yaml</code>来指定 hook 和传给 hook 的参数，以及在什么阶段运行 hook。并可以在本地自动修正。</li>
</ul>
<p>当你安装了 pre-commit 工具，他会根据<code>.pre-commit-config.yaml</code>中的定义来管理 Git 钩子。</p>
<p>什么是 Hook？在 pre-commit 上下文中，钩子（hook）指的是在特定事件（如 Git 提交）发生时自动运行的脚本或工具。</p>
<h2 id="获益">获益<a hidden class="anchor" aria-hidden="true" href="#获益">#</a></h2>
<ul>
<li>自动化：你可以在提交代码之前自动运行各种检查，无需手动触发。</li>
<li>配置简单：使用 <code>.pre-commit-config.yaml</code> 文件可以轻松配置要运行的任务和它们的顺序。</li>
<li>多语言支持：pre-commit 支持各种编程语言的工具，如 Python 的 flake8、mypy，JavaScript 的 eslint，Go 的 golint 等。</li>
<li>可移植性：由于配置是项目的一部分，因此可以在任何支持 pre-commit 的环境中轻松设置和运行。</li>
<li>易于集成：可以与 Git 钩子轻松集成，以在提交时自动运行。</li>
<li>灵活性：可以定义要在每个文件、文件匹配模式或所有文件上运行的任务。</li>
</ul>
<p>包括检查破坏的符号链接、尾随空格、文件末尾的换行符、YAML 文件、TOML 文件、抽象语法树、大文件、合并冲突、脚本的 shebang 行、私钥和调试语句</p>
<h2 id="用法">用法<a hidden class="anchor" aria-hidden="true" href="#用法">#</a></h2>
<p>项目根目录创建文件：<code>.pre-commit-config.yaml</code>。</p>
<h1 id="坑">坑<a hidden class="anchor" aria-hidden="true" href="#坑">#</a></h1>
<p><code>yml</code> 文件不能使用 <code>tab</code>，只能还是用 <code>space</code>。</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://ashburnLee.github.io/blog-2-hugo/tags/cicd/">CICD</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://ashburnLee.github.io/blog-2-hugo/">Junhui&#39;s Journal 2</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
